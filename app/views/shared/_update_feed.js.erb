var h3text = 'Newsfeed (viewing ';
<% if session[:feed_status] == "public" %>
  $('#public-button').addClass('selected');
  $('#private-button').removeClass('selected');
  $('#favorites-button').removeClass('selected');
  h3text = h3text + 'everyone by most ';
<% elsif session[:feed_status] == "favorites" %>
  $('#public-button').removeClass('selected');
  $('#private-button').removeClass('selected');
  $('#favorites-button').addClass('selected');
  h3text = h3text + 'favorites by most ';
<% elsif session[:feed_status] == "private" %>
  $('#public-button').removeClass('selected');
  $('#private-button').addClass('selected');
  $('#favorites-button').removeClass('selected');
  h3text = h3text + 'friends by most ';
<% end %>

<% if session[:sort_order] == "recent" %>
  h3text = h3text + 'recent)';
  $('#recent-button').addClass('selected');
  $('#popular-button').removeClass('selected');
<% else %>
  h3text = h3text + 'popular)';
  $('#recent-button').removeClass('selected');
  $('#popular-button').addClass('selected');
<% end %>
  
$('#filter-settings h3').text(h3text);
$('#filter-title').html('<%= escape_javascript(@filter_title) %>');
$('#feed-items').html('<%= escape_javascript(render(:partial => "shared/feed")) %>');


//Below line was here to clear unread counts - taking out because it now resets the user's list expansion everytime they click a category - handle unread count w/ ajax
//$('#category_links').html('<%= escape_javascript(render(:partial => "shared/category_links")) %>');

$('#friend-block').html('<%= escape_javascript(render(:partial => "shared/friend_block")) %>').hide().show();

	$('.content a').attr('target', '_blank');
	//Translate links in post text to embedded content
	$('.content').embedly({
		//Place embedded content after post
		method: "after",
		maxWidth: 500,
		chars: 150,
		key: '6c398a44d6034de4b75ea047c32e83fe', //TODO: CHANGE THIS TO CLIENT'S API KEY
		
		//Override default success callback to insert target into anchors
		success: function(oembed, dict){
			var _a, elem = $(dict.node);
			if (! (oembed) ) { return null; }
			oembed.code = oembed.code.replace('<a href', '<a target="_blank" href');
			return elem.after(oembed.code);
		}
	});
		
$('.pagination a').attr('data-remote', 'true');